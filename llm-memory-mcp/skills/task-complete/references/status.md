# Todo 状态说明

## 状态值

| 状态码 | 名称 | 说明 |
|--------|------|------|
| 0 | pending | 待处理，任务已创建但未开始 |
| 1 | in_progress | 进行中，Agent 正在处理 |
| 2 | completed | 已完成，任务成功完成 |
| 3 | cancelled | 已取消，任务不再需要 |

## 完成任务的时机

### 应该完成

- ✅ 代码编写完成并测试通过
- ✅ Bug 修复完成
- ✅ 文档更新完成
- ✅ 任务目标已达成

### 不应该完成

- ❌ 代码还未写完
- ❌ 测试未通过
- ❌ 遇到阻塞未解决
- ❌ 任务需要取消（应使用 cancel）

## 部分完成的处理

如果任务只能部分完成：

```
1. 完成能做的部分
    ↓
2. 调用 task-add 创建后续任务
    ↓
3. 调用 task-complete 标记当前任务完成
    ↓
4. 在返回结果中说明:
   - 已完成的部分
   - 未完成的原因
   - 新创建的后续任务
```

## 完成后的状态

```javascript
// 完成后的 todo 状态
{
  code: "todo-auth-login",
  title: "实现登录功能",
  status: 2,  // completed
  updated_at: "2024-01-15T11:45:00Z"
}
```

## 进度计算

完成任务后，可以计算整体进度：

```
进度 = 已完成数 / 总数 × 100%

示例:
  总任务: 5
  已完成: 3
  进度: 60%
```

使用 `sync-progress` skill 同步到关联的 plan。
